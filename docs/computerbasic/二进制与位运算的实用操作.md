# 二进制与位运算的实用操作

![](http://file.wangsijie.top/blog/20210716154648.svg)

由上图，可得出一些规律

- `～x = - x - 1` 对应关系 0 和 -1、1 和 -2、2 和 - 3....
- `~x & x = 0` 
- `~x | x = -1` 
- `~x ^ x = -1`
- `x | 0 = x`
- `x ^ 0 = x`
- `x ^ y ^ y = x`



## 常见应用

### & (and 且)

- 判断奇偶 `x&1 === 1` true 为奇数，false 为偶数，0 也会被认为是偶数，需要处理

### | (or 或)



### ^ (xor 异或)

- 整数交换变量

```js
let a = 27
let b = 99
a = a ^ b
b = a ^ b
a = a ^ b
```

- 整数数字加解密

```js
const key = 123
const encode = t => t ^ key
const decode = code => code ^ key
```



### ~ (not 非)

- 倒过来取下标，比如

  最后一个 `arr.slice(~0)`  

  倒数第二个 `arr.slicce(~1)`



### << (shl 左位移)

- 乘以 2 的 n 次方 `1 << 3 === 1 * 2 * 2 * 2`

  `4 << 3 === 4 * 2 * 2 * 2`

### >> (shr 右位移)

- 除以 2 的 n 次方，向下取整

  `16 >> 3 = 16 / （2 * 2 * 2） = 2 `

  `6 >> 1 = 6 / 2 = 3`



## 进制转换

> 十进制：逢十进一，生活中常用的数值
>
> 二进制：逢二进一，计算机系统使用的数制，只有0和1
>
> 八进制：逢八进一，采用0,1,2,3,4,5,6,7八个数字，通常用数字`0`开头表示八进制
>
> 十六进制：逢十六进一，采用0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F十六个数字，A-F表示十进制中的10-15，通常用`0x`开头来表示

## 十进制转二进制

### 正数转二进制

> 除二取余，倒叙排序，高位补0

```
1 -> 00000001
2 -> 00000010
...
```

![](http://file.wangsijie.top/share/computer-basic-1.png)



### 负数转二进制

> 将该负数的正数进行取反，然后加1

```
-1的正数1：     0000 0001
取反：          1111 1110
+1：           0000 0001
结果：          1111 1111
```



### 整型数据在内存中的存储方式

> 第0位为符号为，0为正数，1位负数

![](http://file.wangsijie.top/share/computer-basic-2.png)

### 小数的十进制转二进制

> 乘2取整，顺序排列

```
0.1 ---> 0.000110011001100110011...
```

