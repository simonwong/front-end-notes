(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{249:function(t,e,a){"use strict";a.r(e);var r=a(0),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"react性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react性能优化","aria-hidden":"true"}},[t._v("#")]),t._v(" React性能优化")]),t._v(" "),a("h2",{attrs:{id:"调试环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调试环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 调试环境")]),t._v(" "),a("p",[t._v("NetWork:")]),t._v(" "),a("ul",[a("li",[t._v("[x] Disable cache")]),t._v(" "),a("li",[t._v("[x] Fast 3G")])]),t._v(" "),a("p",[t._v("Performance:")]),t._v(" "),a("ul",[a("li",[t._v("[x] Secreenshots")])]),t._v(" "),a("h2",{attrs:{id:"首次渲染优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#首次渲染优化","aria-hidden":"true"}},[t._v("#")]),t._v(" 首次渲染优化")]),t._v(" "),a("h3",{attrs:{id:"浏览器自带调试器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器自带调试器","aria-hidden":"true"}},[t._v("#")]),t._v(" 浏览器自带调试器")]),t._v(" "),a("ul",[a("li",[t._v("在performance里进行录制。刷新页面，从加载到完全显示的火焰图")]),t._v(" "),a("li",[t._v("选取range：Network、User Timing的火焰图。查看summary的饼图。")])]),t._v(" "),a("h3",{attrs:{id:"常见的原因分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见的原因分析","aria-hidden":"true"}},[t._v("#")]),t._v(" 常见的原因分析")]),t._v(" "),a("ul",[a("li",[t._v("JS Bundle太大，极其消耗时间")]),t._v(" "),a("li",[t._v("图片文件的加载")])]),t._v(" "),a("h3",{attrs:{id:"优化方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 优化方案")]),t._v(" "),a("ul",[a("li",[t._v("JS Bundle -> Gzip")]),t._v(" "),a("li",[t._v("图片文件 -> CDN")]),t._v(" "),a("li",[t._v("代码分割：使用"),a("code",[t._v("React Router4")]),a("a",{attrs:{href:"https://reacttraining.com/react-router/web/guides/code-splitting",target:"_blank",rel:"noopener noreferrer"}},[t._v("code-splitting"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"视觉优化方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视觉优化方案","aria-hidden":"true"}},[t._v("#")]),t._v(" 视觉优化方案")]),t._v(" "),a("ul",[a("li",[t._v("首页loading、进度条")]),t._v(" "),a("li",[t._v("首页骨架占位")])]),t._v(" "),a("h2",{attrs:{id:"用户使用过程中优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户使用过程中优化","aria-hidden":"true"}},[t._v("#")]),t._v(" 用户使用过程中优化")]),t._v(" "),a("h3",{attrs:{id:"使用react-developer-tools"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用react-developer-tools","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用"),a("code",[t._v("React Developer Tools")])]),t._v(" "),a("ul",[a("li",[t._v("React Profiler -> 录制 -> 操作页面 -> stop")]),t._v(" "),a("li",[t._v("使用Flamegraph、Ranked两种类型的图进行分析")]),t._v(" "),a("li",[t._v("在设置里面筛选渲染时间长的操作节点")]),t._v(" "),a("li",[t._v("双击火焰图的节点来看重复渲染次数")])]),t._v(" "),a("h3",{attrs:{id:"优化方案-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化方案-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 优化方案")]),t._v(" "),a("ul",[a("li",[t._v("Component / PureComponent")])]),t._v(" "),a("blockquote",[a("p",[t._v("PureComponent是自动帮助使用了shouldComponentUpdate生命周期，对下一次的props、state进行了浅比较；")]),t._v(" "),a("p",[t._v("注意：当你的props是复杂的对象，想要复杂对象的内容变化，使得子组件渲染的话，不能使用PureComponent。其他情况尽量多的使用PureComponent来避免重复渲染。")])]),t._v(" "),a("ul",[a("li",[t._v("手动使用shouldComponentUpdate进行比较，或深比较，来减少渲染")]),t._v(" "),a("li",[t._v("拆分复杂页面组件，拆分成一个个小的页面级别组件")]),t._v(" "),a("li",[t._v("尽可能多的写无状态组件")])]),t._v(" "),a("h2",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#","aria-hidden":"true"}},[t._v("#")])])])}),[],!1,null,null,null);e.default=s.exports}}]);