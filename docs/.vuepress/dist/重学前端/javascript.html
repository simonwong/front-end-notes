<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript # | 王思杰的前端笔记</title>
    <meta name="description" content="王思杰的前端笔记，日常总结，工具使用，分享记录，框架使用等等">
    
    
    <link rel="preload" href="/front-end-notes/assets/css/0.styles.96e44ba9.css" as="style"><link rel="preload" href="/front-end-notes/assets/js/app.3a1339e1.js" as="script"><link rel="preload" href="/front-end-notes/assets/js/2.604cf4ca.js" as="script"><link rel="preload" href="/front-end-notes/assets/js/44.90c1960f.js" as="script"><link rel="prefetch" href="/front-end-notes/assets/js/10.03eb2c7f.js"><link rel="prefetch" href="/front-end-notes/assets/js/11.acf72346.js"><link rel="prefetch" href="/front-end-notes/assets/js/12.7c18359f.js"><link rel="prefetch" href="/front-end-notes/assets/js/13.9dd4d041.js"><link rel="prefetch" href="/front-end-notes/assets/js/14.bac0bd5b.js"><link rel="prefetch" href="/front-end-notes/assets/js/15.457a46ed.js"><link rel="prefetch" href="/front-end-notes/assets/js/16.1d56c2b0.js"><link rel="prefetch" href="/front-end-notes/assets/js/17.de1efe78.js"><link rel="prefetch" href="/front-end-notes/assets/js/18.abda3408.js"><link rel="prefetch" href="/front-end-notes/assets/js/19.1db77ba3.js"><link rel="prefetch" href="/front-end-notes/assets/js/20.382a3d90.js"><link rel="prefetch" href="/front-end-notes/assets/js/21.44ab7c6c.js"><link rel="prefetch" href="/front-end-notes/assets/js/22.58bf1cb8.js"><link rel="prefetch" href="/front-end-notes/assets/js/23.225cfce7.js"><link rel="prefetch" href="/front-end-notes/assets/js/24.58fb8fa9.js"><link rel="prefetch" href="/front-end-notes/assets/js/25.2976424c.js"><link rel="prefetch" href="/front-end-notes/assets/js/26.e6ff6c2a.js"><link rel="prefetch" href="/front-end-notes/assets/js/27.915c0f24.js"><link rel="prefetch" href="/front-end-notes/assets/js/28.4f847ca0.js"><link rel="prefetch" href="/front-end-notes/assets/js/29.b505dbb6.js"><link rel="prefetch" href="/front-end-notes/assets/js/3.eb6fb99f.js"><link rel="prefetch" href="/front-end-notes/assets/js/30.0a8ccf8f.js"><link rel="prefetch" href="/front-end-notes/assets/js/31.f01e9c4b.js"><link rel="prefetch" href="/front-end-notes/assets/js/32.44fedcdf.js"><link rel="prefetch" href="/front-end-notes/assets/js/33.a7d203fc.js"><link rel="prefetch" href="/front-end-notes/assets/js/34.1109f4e6.js"><link rel="prefetch" href="/front-end-notes/assets/js/35.a38c4eee.js"><link rel="prefetch" href="/front-end-notes/assets/js/36.a1a1e8d3.js"><link rel="prefetch" href="/front-end-notes/assets/js/37.0dad6966.js"><link rel="prefetch" href="/front-end-notes/assets/js/38.bfa110f4.js"><link rel="prefetch" href="/front-end-notes/assets/js/39.64a2e766.js"><link rel="prefetch" href="/front-end-notes/assets/js/4.25b99976.js"><link rel="prefetch" href="/front-end-notes/assets/js/40.ea450882.js"><link rel="prefetch" href="/front-end-notes/assets/js/41.2095a3be.js"><link rel="prefetch" href="/front-end-notes/assets/js/42.942e5393.js"><link rel="prefetch" href="/front-end-notes/assets/js/43.aa111a7b.js"><link rel="prefetch" href="/front-end-notes/assets/js/45.a769dbc5.js"><link rel="prefetch" href="/front-end-notes/assets/js/46.96b52737.js"><link rel="prefetch" href="/front-end-notes/assets/js/47.eae4a707.js"><link rel="prefetch" href="/front-end-notes/assets/js/48.441a1808.js"><link rel="prefetch" href="/front-end-notes/assets/js/49.562478a7.js"><link rel="prefetch" href="/front-end-notes/assets/js/5.0ad5b366.js"><link rel="prefetch" href="/front-end-notes/assets/js/6.472d5017.js"><link rel="prefetch" href="/front-end-notes/assets/js/7.0fdb16c3.js"><link rel="prefetch" href="/front-end-notes/assets/js/8.5a63fe57.js"><link rel="prefetch" href="/front-end-notes/assets/js/9.11d9bbfc.js">
    <link rel="stylesheet" href="/front-end-notes/assets/css/0.styles.96e44ba9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/front-end-notes/" class="home-link router-link-active"><!----> <span class="site-name">王思杰的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-notes/note/" class="nav-link">日常</a></li><li class="dropdown-item"><!----> <a href="/front-end-notes/重学前端/" class="nav-link">重学前端</a></li></ul></div></div><div class="nav-item"><a href="/front-end-notes/basic/" class="nav-link">前端基础</a></div><div class="nav-item"><a href="/front-end-notes/engineering/" class="nav-link">前端工程</a></div><div class="nav-item"><a href="/front-end-notes/backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/front-end-notes/computerbasic/" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="https://github.com/simonjayw" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-notes/note/" class="nav-link">日常</a></li><li class="dropdown-item"><!----> <a href="/front-end-notes/重学前端/" class="nav-link">重学前端</a></li></ul></div></div><div class="nav-item"><a href="/front-end-notes/basic/" class="nav-link">前端基础</a></div><div class="nav-item"><a href="/front-end-notes/engineering/" class="nav-link">前端工程</a></div><div class="nav-item"><a href="/front-end-notes/backend/" class="nav-link">后端</a></div><div class="nav-item"><a href="/front-end-notes/computerbasic/" class="nav-link">计算机基础</a></div><div class="nav-item"><a href="https://github.com/simonjayw" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/front-end-notes/%E9%87%8D%E5%AD%A6%E5%89%8D%E7%AB%AF/" class="sidebar-link">整理知识结构 ##</a></li><li><a href="/front-end-notes/重学前端/html.html" class="sidebar-link">HTML #</a></li><li><a href="/front-end-notes/重学前端/css.html" class="sidebar-link">CSS #</a></li><li><a href="/front-end-notes/重学前端/javascript.html" class="active sidebar-link">JavaScript #</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-notes/重学前端/javascript.html#类型" class="sidebar-link">类型</a></li><li class="sidebar-sub-header"><a href="/front-end-notes/重学前端/javascript.html#对象" class="sidebar-link">对象</a></li><li class="sidebar-sub-header"><a href="/front-end-notes/重学前端/javascript.html#类与原型" class="sidebar-link">类与原型</a></li><li class="sidebar-sub-header"><a href="/front-end-notes/重学前端/javascript.html#对象的分类" class="sidebar-link">对象的分类</a></li><li class="sidebar-sub-header"><a href="/front-end-notes/重学前端/javascript.html#javascript-的执行" class="sidebar-link">JavaScript 的执行</a></li><li class="sidebar-sub-header"><a href="/front-end-notes/重学前端/javascript.html#词法" class="sidebar-link">词法</a></li></ul></li><li><a href="/front-end-notes/重学前端/browser.html" class="sidebar-link">浏览器是如何工作的 ##</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript"><a href="#javascript" aria-hidden="true" class="header-anchor">#</a> JavaScript</h1> <h2 id="类型"><a href="#类型" aria-hidden="true" class="header-anchor">#</a> 类型</h2> <blockquote><p>Undefined、Null、Boolean、String、Number、Symbol、Object</p></blockquote> <h3 id="undefined、null"><a href="#undefined、null" aria-hidden="true" class="header-anchor">#</a> undefined、null</h3> <p>undefined是一个变量。并非关键字。建议使用void 0类获取undfined值。</p> <p>null是关键字：“定义了但是为空”</p> <h3 id="boolean"><a href="#boolean" aria-hidden="true" class="header-anchor">#</a> Boolean</h3> <p><code>true</code> <code>false</code></p> <h3 id="string"><a href="#string" aria-hidden="true" class="header-anchor">#</a> String</h3> <p>字符串的最大长度是2^53-1</p> <p>字符串是<code>UTF-16</code>编码，常用的<code>chartAt</code> <code>charCodeAt</code> <code>length</code>都是针对的UTF-16编码</p> <blockquote><p>0-65536（U+0000 - U+FFFF）的码点被称为基本字符区域（BMP）</p></blockquote> <p>处理非BMP的字符，要小心。如<code>喆</code></p> <h3 id="number"><a href="#number" aria-hidden="true" class="header-anchor">#</a> Number</h3> <p>有18437736874454810627(即 2^64-2^53+3) 个值</p> <ul><li>NaN，占用了9007199254740990</li> <li>Infinity，无穷大</li> <li>-Infinity，负无穷大</li></ul> <p><code>0.1 + 0.2 == 0.3</code>的比较方法<code>Math.abs(0.1 + 0.2 - 0.3) &lt;= Number.EPSILON</code></p> <h3 id="symbol"><a href="#symbol" aria-hidden="true" class="header-anchor">#</a> Symbol</h3> <p>是一切非字符串的对象 key 的集合</p> <h3 id="object"><a href="#object" aria-hidden="true" class="header-anchor">#</a> Object</h3> <p>是一切有形和无形物体的总称。</p> <p>是“属性的集合” key-value</p> <p>基本类型和他们的对象类型：</p> <p>Number、String、Boolean、Symbol</p> <p>3 与 <code>new Number(3)</code>是完全不同的值。一个是Number类型，一个是对象类型。</p> <p>前三个构造器是两用的。跟<code>new</code>搭配，产生对象，直接调用表示强制类型转换</p> <h3 id="类型转换"><a href="#类型转换" aria-hidden="true" class="header-anchor">#</a> 类型转换</h3> <p><img src="http://file.wangsijie.top/share/chongxuefe/2019-02-1871bafbd2404dc3ffa5ccf5d0ba077720.jpg" alt=""></p> <h3 id="stringtonumber"><a href="#stringtonumber" aria-hidden="true" class="header-anchor">#</a> StringToNumber</h3> <p><code>parseInt</code>建议都穿入第二个参数</p> <p><code>parseFloat</code>直接吧原字符串作为十进制来解析</p> <p>Number是比上面俩个更好的选择</p> <h3 id="numbertostring"><a href="#numbertostring" aria-hidden="true" class="header-anchor">#</a> NumberToString</h3> <p>基本是符合直觉的十进制转换</p> <h3 id="装箱转换"><a href="#装箱转换" aria-hidden="true" class="header-anchor">#</a> 装箱转换</h3> <blockquote><p>把基本类型转换为对应的对象</p></blockquote> <p><code>Object(Symbol('a')) //=&gt; Symbol {Symbol(a)}description: &quot;a&quot;__proto__: Symbol[[PrimitiveValue]]: Symbol(a)</code></p> <p><code>Object.prototype.toString.call</code>可以准确识别对象的基本类型。</p> <p>但是call本身会进行装箱操作，所以要typeof区分是基本类型，还是对象类型</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token number">1</span> <span class="token comment">// =&gt; &quot;Number&quot;</span>
<span class="token keyword">typeof</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;Object&quot;</span>

<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;[object Number]&quot;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">Object</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;[object Number]&quot;</span>
</code></pre></div><h3 id="拆箱转换"><a href="#拆箱转换" aria-hidden="true" class="header-anchor">#</a> 拆箱转换</h3> <blockquote><p>把对象类型转换为基本类型</p> <p>遵循“先拆箱再转换”</p></blockquote> <blockquote><p>拆箱转换会尝试调用<code>valueOf</code> <code>toString</code>，如果都不存在，或者没有返回基本类型，就会抛出<code>TypeError</code></p></blockquote> <p>当做一些类型强制转换时，会进行拆箱转换。会有不同的顺序</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>obj <span class="token operator">*</span> <span class="token number">2</span> <span class="token comment">// =&gt; valueOf --&gt; toString --&gt; TypeError</span>
obj <span class="token operator">+</span> <span class="token string">''</span> <span class="token comment">// =&gt; toString --&gt; valueOf --&gt; TypeError</span>
</code></pre></div><h3 id="规范类型"><a href="#规范类型" aria-hidden="true" class="header-anchor">#</a> 规范类型</h3> <p>除了七种语言类型，还有规范类型</p> <ul><li>List 和 Record：用于描述函数传参过程</li> <li>Set：主要用于结束字符集等</li> <li>Completion Record：用于描述异常、跳出等语句执行过程</li> <li>Reference：用于描述对象属性访问、delete等</li> <li>Lexical Environment 和 Environment Record：用于描述变量和作用域</li> <li>Data Block：用于描述二进制数据</li></ul> <h2 id="对象"><a href="#对象" aria-hidden="true" class="header-anchor">#</a> 对象</h2> <p>对象的特点</p> <ul><li>对象具有唯一标识性：具有唯一标识的内存地址</li> <li>对象有状态：同一对象处于不同的状态</li> <li>对象具有行为：对象的状态可能因为他的行为产生变迁</li></ul> <blockquote><p>对象独有的特色：<strong>对象具有高度的动态性，这是因为 JavaScript 赋予了使用者在运行时为对象添改状态和行为的能力</strong></p></blockquote> <h2 id="类与原型"><a href="#类与原型" aria-hidden="true" class="header-anchor">#</a> 类与原型</h2> <blockquote><p>基于类的编程语言 C++ 、 Java 等</p> <p>基于原型 JavaScript 等</p></blockquote> <p>原型系统的“复制操作”思路：</p> <ul><li>新对象持有一个原型的引用：JavaScript</li> <li>切实地复制对象，且无关联</li></ul> <h3 id="javascript的原型"><a href="#javascript的原型" aria-hidden="true" class="header-anchor">#</a> JavaScript的原型</h3> <blockquote><p>如果所有对象都有私有字段 [[prototype]] ，就是对象的原型</p> <p>读取一个属性，如果对象本身没有，就会继续访问对象的原型，知道原型为空或找到</p></blockquote> <p>ES6 访问操作原型</p> <ul><li><code>Object.create</code> 根据指定的原型创建新对象，原型可以是 null</li> <li><code>Object.getPrototypeOf</code> 获得一个对象的原型</li> <li><code>Object.setPrototypeOf</code> 设置一个对象的原型</li></ul> <h3 id="早期的原型和类"><a href="#早期的原型和类" aria-hidden="true" class="header-anchor">#</a> 早期的原型和类</h3> <p>模拟类</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">function</span> <span class="token function">c1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>p1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">p2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
<span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">c1</span><span class="token punctuation">;</span>
o1<span class="token punctuation">.</span><span class="token function">p2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这种方式的p1、p2属性将被暴露在o1中</span>


<span class="token keyword">function</span> <span class="token function">c2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
c2<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>p1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
c2<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">p2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">c2</span><span class="token punctuation">;</span>
o2<span class="token punctuation">.</span><span class="token function">p2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这种方式的p1、p2属性不会暴露</span>
</code></pre></div><h3 id="es6中的类"><a href="#es6中的类" aria-hidden="true" class="header-anchor">#</a> ES6中的类</h3> <h2 id="对象的分类"><a href="#对象的分类" aria-hidden="true" class="header-anchor">#</a> 对象的分类</h2> <ul><li>宿主对象</li> <li>内置对象
<ul><li>固有对象</li> <li>原生对象</li> <li>普通对象</li></ul></li></ul> <h3 id="宿主对象"><a href="#宿主对象" aria-hidden="true" class="header-anchor">#</a> 宿主对象</h3> <p>比如浏览器环境中的宿主。</p> <p>window上的属性一部分来自 JavaScript 语言，一部分来自浏览器。</p> <p>又分为固有的和用户创建的。<code>document.createElement</code> 可以创建一些 dom 对象。</p> <p>还会提供一些构造器，比如 <code>new Image</code></p> <h3 id="内置对象·固有对象"><a href="#内置对象·固有对象" aria-hidden="true" class="header-anchor">#</a> 内置对象·固有对象</h3> <p>由标准规定，随着 JavaScript 运行时创建而自动创建的实例</p> <h3 id="内置对象·原生对象"><a href="#内置对象·原生对象" aria-hidden="true" class="header-anchor">#</a> 内置对象·原生对象</h3> <p><img src="http://file.wangsijie.top/share/chongxuefe/07f7826ffeb895e2e8a59dd186cf7758.png" alt=""></p> <blockquote><p>几乎所有这些构造器的能力都是无法用纯js代码实现的，也无法用 class/extend 继承</p></blockquote> <h3 id="内置对象·普通对象"><a href="#内置对象·普通对象" aria-hidden="true" class="header-anchor">#</a> 内置对象·普通对象</h3> <h3 id="用对象来模拟函数与构造器：函数对象和构造器对象"><a href="#用对象来模拟函数与构造器：函数对象和构造器对象" aria-hidden="true" class="header-anchor">#</a> 用对象来模拟函数与构造器：函数对象和构造器对象</h3> <blockquote><p>函数对象：具有 [[call]] 私有字段的对象</p> <p>构造器对象：具有 [[construct]] 的对象</p></blockquote> <h2 id="javascript-的执行"><a href="#javascript-的执行" aria-hidden="true" class="header-anchor">#</a> JavaScript 的执行</h2> <h3 id="事件循环-宏观任务与微观任务"><a href="#事件循环-宏观任务与微观任务" aria-hidden="true" class="header-anchor">#</a> 事件循环 - 宏观任务与微观任务</h3> <p>宏观任务：由宿主发起的</p> <p>微观任务：由 JS 引擎发起的</p> <blockquote><p>JavaScript 引擎等待宿主环境分配宏观任务，通常等待的行为都是一个事件循环</p> <p>整个循环做的事情基本就是反复“等待 - 执行”</p></blockquote> <p>每次执行过程，其实就是一个宏观任务，所以<strong>宏观任务的列队</strong>就相当于事件循环</p> <p>宏观任务中，Promise 也会产生异步代码，JS需要保证这些异步代码在一个宏观任务中执行。</p> <p>每个宏观任务又包含一个微观任务列队</p> <h3 id="闭包"><a href="#闭包" aria-hidden="true" class="header-anchor">#</a> 闭包</h3> <p><img src="http://file.wangsijie.top/share/chongxuefe/68f50c00d475a7d6d8c7eef6a91b2152.png" alt=""></p> <blockquote><p>其实只是一个绑定了<strong>执行环境</strong>的函数</p></blockquote> <ul><li>环境部分
<ul><li>环境：函数的词法环境（执行上下文的一部分）</li> <li>标识符列表：函数中用到的未申明变量</li></ul></li> <li>表达式部分：函数体</li></ul> <h3 id="执行上下文：执行的基础设施"><a href="#执行上下文：执行的基础设施" aria-hidden="true" class="header-anchor">#</a> 执行上下文：执行的基础设施</h3> <ul><li>Lexical environment：词法环境，当获取变量或者 this 值时使用</li> <li>variable environment：变量环境，当申明变量时使用</li> <li>code evalution state：用于恢复代码执行位置</li> <li>Function：执行的任务是函数时使用，表示正在被执行的函数</li> <li>ScriptOrMoudle：执行的任务是脚本或模板时使用，表示正在执行的代码</li> <li>Realm：使用的基础库和内置对象实例</li> <li>Generator：仅生成器上下文有这个属性，表示当前生成器</li></ul> <h3 id="this"><a href="#this" aria-hidden="true" class="header-anchor">#</a> this</h3> <blockquote><p>普通函数的 this 值由“调用它所使用的引用”所决定</p></blockquote> <h3 id="completion-类型"><a href="#completion-类型" aria-hidden="true" class="header-anchor">#</a> Completion 类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// a</span>
<span class="token comment">// 0</span>
</code></pre></div><p>Completion Record 用于描述异常、跳出等语句执行过程，表示一个语句执行完之后的结果</p> <ul><li>[[type]] 表示完成的类型，有 break continue return throw normal 几种</li> <li>[[value]] 表示语句的返回值，如果语句没有，则是 empty</li> <li>[[target]] 表示语句的目标，通常是一个 JavaScript 标签</li></ul> <p><img src="http://file.wangsijie.top/share/chongxuefe/98ce53be306344c018cddd6c083392d5.jpg" alt=""></p> <p><img src="http://file.wangsijie.top/share/chongxuefe/7760027d7ee09bdc8ec140efa9caf1d3.png" alt=""></p> <ul><li>穿透：穿过当前这一层，到外面那一层</li> <li>消费：这一层就处理了</li></ul> <h2 id="词法"><a href="#词法" aria-hidden="true" class="header-anchor">#</a> 词法</h2> <h3 id="whitespace-空白字符"><a href="#whitespace-空白字符" aria-hidden="true" class="header-anchor">#</a> WhiteSpace 空白字符</h3> <p>js 支持所有的 Unicode 中的空格分类下的空格</p> <h3 id="lineterminator-换行符"><a href="#lineterminator-换行符" aria-hidden="true" class="header-anchor">#</a> LineTerminator 换行符</h3> <p>换行符回影响 js 的两个重要语法特性：自动插入分号和” no line terminator “规则</p> <h3 id="comment-注释"><a href="#comment-注释" aria-hidden="true" class="header-anchor">#</a> Comment 注释</h3> <h3 id="token-词"><a href="#token-词" aria-hidden="true" class="header-anchor">#</a> Token 词</h3> <ul><li><p>IndentifierName 标识符名称，变量名</p></li> <li><p>Punctuator 符号，运算符和大括号等</p> <div class="language- extra-class"><pre class="language-text"><code>{ ( ) [ ] . ... ; , &lt; &gt; &lt;= &gt;= == != === !== + - * % ** ++ -- &lt;&lt; &gt;&gt; &gt;&gt;&gt; &amp; | ^ ! ~ &amp;&amp; || ? : = += -= *= %= **= &lt;&lt;= &gt;&gt;= &gt;&gt;&gt;= &amp;= |= ^= =&gt; / /= }
</code></pre></div></li> <li><p>NumericLiteral 数字直接量，数字</p> <p><code>12.toString()</code> 12. 会被当作数字的一部分，所以会报错，可以加个空格，让点成为单独的token <code>12 .toString()</code></p></li> <li><p>StringLiteral 字符串直接量，单双引号引起来的直接量</p></li> <li><p>RegularExpressionLiteral 正则表达式直接量</p></li> <li><p>Template 字符串模板</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front-end-notes/重学前端/css.html" class="prev">CSS #</a></span> <span class="next"><a href="/front-end-notes/重学前端/browser.html">浏览器是如何工作的 ##</a>→
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/front-end-notes/assets/js/app.3a1339e1.js" defer></script><script src="/front-end-notes/assets/js/2.604cf4ca.js" defer></script><script src="/front-end-notes/assets/js/44.90c1960f.js" defer></script>
  </body>
</html>
